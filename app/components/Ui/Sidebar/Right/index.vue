<template>
  <aside
    class="bg-neutral-100 overflow-hidden border border-r-0 my-1 rounded-tl-lg rounded-bl-lg border-(--color-standard) shadow-lg bottom-0 top-0 right-0 fixed z-20 w-sm flex flex-col gap-4"
  >
    <h2 class="mt-8 px-6 text-(--color-lapis-950)">
      <svg
        width="82"
        height="19"
        viewBox="0 0 82 19"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M0.00200018 18V1.048H4.786C6.51933 1.048 8.01867 1.34267 9.284 1.932C10.5493 2.52133 11.5287 3.44 12.222 4.688C12.9327 5.91867 13.288 7.50467 13.288 9.446C13.288 11.3873 12.9413 12.9907 12.248 14.256C11.5547 15.5213 10.584 16.466 9.336 17.09C8.10533 17.6967 6.658 18 4.994 18H0.00200018ZM3.824 14.906H4.552C5.52267 14.906 6.36333 14.7327 7.074 14.386C7.802 14.0393 8.36533 13.4673 8.764 12.67C9.16267 11.8727 9.362 10.798 9.362 9.446C9.362 8.094 9.16267 7.03667 8.764 6.274C8.36533 5.494 7.802 4.948 7.074 4.636C6.36333 4.30667 5.52267 4.142 4.552 4.142H3.824V14.906ZM16.2459 18V1.048H26.8539V4.272H20.0679V7.678H25.8399V10.876H20.0679V14.776H27.1139V18H16.2459ZM35.404 18.312C34.2947 18.312 33.1854 18.104 32.076 17.688C30.984 17.272 30.0047 16.6653 29.138 15.868L31.322 13.242C31.9287 13.762 32.6047 14.1867 33.35 14.516C34.0954 14.8453 34.8147 15.01 35.508 15.01C36.3054 15.01 36.8947 14.8627 37.276 14.568C37.6747 14.2733 37.874 13.8747 37.874 13.372C37.874 12.8347 37.6487 12.4447 37.198 12.202C36.7647 11.942 36.1754 11.656 35.43 11.344L33.22 10.408C32.648 10.1653 32.102 9.84467 31.582 9.446C31.062 9.03 30.6374 8.51867 30.308 7.912C29.9787 7.30533 29.814 6.59467 29.814 5.78C29.814 4.844 30.0654 3.99467 30.568 3.232C31.088 2.46933 31.7987 1.86267 32.7 1.412C33.6187 0.961333 34.6674 0.735999 35.846 0.735999C36.8167 0.735999 37.7874 0.926666 38.758 1.308C39.7287 1.68933 40.578 2.244 41.306 2.972L39.356 5.39C38.8014 4.95667 38.2467 4.62733 37.692 4.402C37.1374 4.15933 36.522 4.038 35.846 4.038C35.1874 4.038 34.6587 4.17667 34.26 4.454C33.8787 4.714 33.688 5.08667 33.688 5.572C33.688 6.092 33.9307 6.482 34.416 6.742C34.9187 7.002 35.534 7.27933 36.262 7.574L38.446 8.458C39.4687 8.874 40.2834 9.446 40.89 10.174C41.4967 10.902 41.8 11.864 41.8 13.06C41.8 13.996 41.5487 14.8627 41.046 15.66C40.5434 16.4573 39.8154 17.0987 38.862 17.584C37.9087 18.0693 36.756 18.312 35.404 18.312ZM44.4173 18V1.048H48.2393V18H44.4173ZM59.4656 18.312C57.923 18.312 56.519 17.9827 55.2536 17.324C54.0056 16.6653 53.009 15.6947 52.2636 14.412C51.5356 13.112 51.1716 11.5173 51.1716 9.628C51.1716 7.756 51.5443 6.16133 52.2896 4.844C53.0523 3.50933 54.0576 2.49533 55.3056 1.802C56.5536 1.09133 57.9316 0.735999 59.4396 0.735999C60.6703 0.735999 61.7276 0.961333 62.6116 1.412C63.4956 1.86267 64.215 2.374 64.7696 2.946L62.7676 5.39C62.3343 5.00867 61.875 4.688 61.3896 4.428C60.9043 4.168 60.2976 4.038 59.5696 4.038C58.2523 4.038 57.1776 4.52333 56.3456 5.494C55.5136 6.46467 55.0976 7.79933 55.0976 9.498C55.0976 11.2313 55.4963 12.5833 56.2936 13.554C57.091 14.5247 58.2783 15.01 59.8556 15.01C60.2023 15.01 60.5403 14.9667 60.8696 14.88C61.199 14.7933 61.4676 14.6633 61.6756 14.49V11.578H58.8676V8.458H65.0556V16.258C64.4663 16.83 63.6776 17.3153 62.6896 17.714C61.719 18.1127 60.6443 18.312 59.4656 18.312ZM68.2977 18V1.048H72.2237L76.6437 9.472L78.3077 13.216H78.4117C78.3424 12.3147 78.247 11.3093 78.1257 10.2C78.0044 9.09067 77.9437 8.03333 77.9437 7.028V1.048H81.5837V18H77.6577L73.2377 9.55L71.5737 5.858H71.4697C71.5564 6.794 71.6517 7.79933 71.7557 8.874C71.877 9.94867 71.9377 10.9887 71.9377 11.994V18H68.2977Z"
          fill="currentColor"
        />
      </svg>
    </h2>
    <div class="space-y-4 overflow-auto py-6 h-full px-6 mt-6">
      <div class="space-y-1 sticky -top-6 bg-neutral-100 z-10">
        <div class="text-base font-bold uppercase">Theme:</div>
        <span class="flex flex-wrap gap-2">
          <ElButton
            class="capitalize"
            inline
            variant="text"
            :active="config.theme.selected === ETheme.default"
            @click="config.theme.selected = ETheme.default"
          >
            {{ ETheme.default }}
          </ElButton>

          <ElButton
            class="capitalize"
            inline
            variant="text"
            :active="config.theme.selected === ETheme.bitly"
            @click="config.theme.selected = ETheme.bitly"
          >
            {{ ETheme.bitly }}
          </ElButton>

          <ElButton
            class="capitalize"
            inline
            variant="text"
            :active="config.theme.selected === ETheme.stars"
            @click="config.theme.selected = ETheme.stars"
          >
            {{ ETheme.stars }}
          </ElButton>

          <ElButton
            class="capitalize"
            inline
            variant="text"
            :active="config.theme.selected === ETheme.earth"
            @click="config.theme.selected = ETheme.earth"
          >
            {{ ETheme.earth }}
          </ElButton>

          <ElButton
            class="capitalize"
            inline
            variant="text"
            :active="config.theme.selected === ETheme.background"
            @click="config.theme.selected = ETheme.background"
          >
            {{ ETheme.background }}
          </ElButton>

          <ElButton
            class="capitalize"
            inline
            variant="text"
            :active="config.theme.selected === ETheme.animations"
            @click="config.theme.selected = ETheme.animations"
          >
            {{ ETheme.animations }}
          </ElButton>
        </span>
      </div>
      <hr class="border-(--color-standard)" />
      <div class="space-y-6">
        <h2 class="text-base uppercase font-bold text-(--color-dark-primary)">
          Configuration
        </h2>
        <div>
          <ElInput
            v-model="config.image"
            name="image"
            label="Logo"
            type="text"
          />
        </div>
        <component :is="returnThemeComponent" v-if="returnThemeComponent" />
      </div>
    </div>
    <div
      class="p-4 space-y-2 border-t border-(--color-standard) bg-(--color-lapis-100)"
    >
      <ElButton class="uppercase" @click="showShareModal = true">
        Generate Embedded Code
      </ElButton>
      <ElPublish />
      <ElButton variant="error" class="uppercase" @click="onResetConfig">
        Reset All Changes
      </ElButton>
    </div>
  </aside>
  <ModalShare v-if="showShareModal" @close="showShareModal = false" />
</template>

<script setup lang="ts">
import { ETheme } from "~/composables/useConfig";

const { config, returnThemeComponent, onResetConfig } = useConfig();

const showShareModal = ref(false);
</script>
